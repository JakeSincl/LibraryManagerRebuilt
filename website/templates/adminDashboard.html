{% extends "base.html" %}

{% block title %} - Admin Dashboard{% endblock %}

{% block content %}

<div>
  <form method="POST" class="card p-3 bg-light">
    <h3 align="center">New book form</h3>
    <div class="form-group">
      <label for="title">Title</label>
      <input
        type="title"
        class="form-control"
        id="title"
        name="title"
        placeholder="Enter the book's title"
      />
    </div>
    <div class="form-group">
      <label for="author">Author</label>
      <input
        type="author"
        class="form-control"
        id="author"
        name="author"
        placeholder="Enter the author's name"
      />
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        class="form-control"
        id="description"
        name="description"
        rows="3"
        placeholder="Enter a description of the book"
        ></textarea>
    </div>
    <div class="form-group">
      <label for="publish_year">Year Published</label>
      <input
        type="publish_year"
        class="form-control"
        id="publish_year"
        name="publish_year"
        placeholder="Enter the year in which the book was published"
      />
    </div>
    <br>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
<br>
<hr><!-- ------------------------------------------------------------------ --->
<br>
<div>
  <form method="POST" class="card p-3 bg-light">
    <h3 align="center">Book Removal</h3>
    <label for="titleSearch">Title</label>
    <input name ="titleSearch" type="text" class="live-search-box" placeholder="Enter the title" />
    <br>
    <div class="card p-3 bg-light">
      <label for="titleList">Books that are available to remove:</label>
      <ul name="titleList" class="live-search-list" type="None">
        {% for book in allBooks %}
          {% if book.loaned_to == 0 %}
            <li>{{ book.title }}</li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
      
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
      
    <script type="text/javascript">
        jQuery(document).ready(function($){
      
    $('.live-search-list li').each(function(){
    $(this).attr('data-search-term', $(this).text().toLowerCase());
    });
      
    $('.live-search-box').on('keyup', function(){
      
    var searchTerm = $(this).val().toLowerCase();
        $('.live-search-list li').each(function(){
            if ($(this).filter('[data-search-term *= ' + searchTerm + ']').length > 0 || searchTerm.length < 1) {
                $(this).show();
            } else {
                $(this).hide();
            }
        });
    });
      
    });
    </script>
    </div>
      <br>
      <button type="submit" class="btn btn-primary">Submit</button>
      <br>
  </form>
</div>

{% endblock %}